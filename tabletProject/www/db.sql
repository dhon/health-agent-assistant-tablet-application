CREATE TABLE RESTAURANT( ID INTEGER PRIMARY KEY NOT NULL, PROPERTYID INT NOT NULL, NAME TEXT NOT NULL, ADDRESS TEXT NOT NULL, OWNERID INT NOT NULL, PERSONINCHARGE TEXT NOT NULL, FOREIGN KEY(PROPERTYID) REFERENCES PROPERTY(ID), FOREIGN KEY(OWNERID) REFERENCES OWNER(ID), FOREIGN KEY(ID) REFERENCES RESTAURANTINSPECTIONS(RESTAURANTID) );
CREATE TABLE SEPTIC( ID INTEGER PRIMARY KEY NOT NULL, PROPERTYID INT NOT NULL, OWNERID INT NOT NULL, FOREIGN KEY(PROPERTYID) REFERENCES PROPERTY(ID), FOREIGN KEY(ID) REFERENCES SYSTEMPUMPINGRECORD(SEPTICID), FOREIGN KEY(ID) REFERENCES SEPTICINSPECTIONS(SEPTICID), FOREIGN KEY(OWNERID) REFERENCES OWNER(ID), FOREIGN KEY(OWNERID) REFERENCES OWNER(ID) );
CREATE TABLE WELL( ID INTEGER PRIMARY KEY NOT NULL, PROPERTYID INT NOT NULL, OWNERID INT NOT NULL, FOREIGN KEY(PROPERTYID) REFERENCES PROPERTY(ID), FOREIGN KEY(ID) REFERENCES WATERQUALITYREPORT(WELLID), FOREIGN KEY(OWNERID) REFERENCES OWNER(ID) );
CREATE TABLE OWNER(ID INTEGER PRIMARY KEY NOT NULL, OWNERNAME TEXT NOT NULL, TELEPHONENUMBER TEXT NOT NULL);
CREATE TABLE PROPERTY( ID INTEGER PRIMARY KEY NOT NULL, GPSCOORDINATES REAL NOT NULL, ADDRESS TEXT NOT NULL, TOWN TEXT NOT NULL, STATE TEXT NOT NULL, ZIPCODE INT NOT NULL, PLOTNUMER INT NOT NULL, FOREIGN KEY(ID) REFERENCES WELL(PROPERTYID), FOREIGN KEY(ID) REFERENCES RESTAURANT(PROPERTYID), FOREIGN KEY(ID) REFERENCES SEPTIC(PROPERTYID) );
CREATE TABLE RESTAURANTINSPECTIONS( ID INTEGER PRIMARY KEY NOT NULL, RESTAURANTID INT NOT NULL, INSPECTOR TEXT NOT NULL, RISKLEVEL TEXT NOT NULL, HACCP INTEGER NOT NULL, TIMEIN INTEGER NOT NULL, TIMEOUT INTEGER NOT NULL, TYPEOFOPERATION INTEGER NOT NULL, TYPEOFINSPECTION INTEGER NOT NULL, PREVIOUSINSPECTIONDATE INTEGER, REASONING INTEGER NOT NULL, OTHERREASONING TEXT, MANAGEMENTANDPERSONNEL TEXT, FOODANDFOODPROTECTION TEXT, EQUIPMENTANDUTENSILS TEXT, WATERPLUMBINGANDWASTE TEXT, PHYSICALFACILITY TEXT, POISONOUSORTOXICMATERIALS TEXT, SPECIALREQUIREMENTS TEXT, OTHER0 TEXT, DISCUSSIONWITHPERSONINCHARGE TEXT, CORRECTIVEACTIONREQUIRED INT, VOLUNTARYCOMPLIANCE INT, REINSPECTIONSCHEDULED INT, VOLUNTARYDISPOSAL INT, EMPLOYEERESTRICTIONEXCLUSION INT, EMERGENCYSUSPENSION INT, EMERGENCYCLOSURE INT, OTHER1 INT, ADDITIONALNOTES TEXT, FOREIGN KEY(TYPEOFOPERATION) REFERENCES TYPEOFOPERATION(ID), FOREIGN KEY(TYPEOFINSPECTION) REFERENCES TYPEOFINSPECTION(ID), FOREIGN KEY(REASONING) REFERENCES REASONING(ID), FOREIGN KEY(ID) REFERENCES VIOLATIONS(RESTAURANTINSPECTIONID) );
CREATE TABLE TYPEOFOPERATION( ID INTEGER PRIMARY KEY NOT NULL, OPERATIONTYPE TEXT NOT NULL);
CREATE TABLE TYPEOFINSPECTION( ID INTEGER PRIMARY KEY NOT NULL, INSPECTIONTYPE TEXT NOT NULL );
CREATE TABLE REASONING( ID INTEGER PRIMARY KEY NOT NULL, REASONING TEXT NOT NULL );
CREATE TABLE SYSTEMPUMPINGRECORD( ID INTEGER PRIMARY KEY NOT NULL, SEPTICID INT NOT NULL, PUMPINGDATE REAL NOT NULL, QUANTITYPUMPED REAL NOT NULL, COMPONENT INT NOT NULL, SYSTEMQUALITYOTHER TEXT NOT NULL, EFFLUENTTEEFILTERPRESENT INT NOT NULL, IFYESWASITCLEANED INT NOT NULL, OBSERVEDCONDITION TEXT NOT NULL, SYSTEMPUMPEDBYNAME TEXT NOT NULL, SYSTEMPUMPEDBYLICENSE TEXT NOT NULL, SYSTEMPUMPEDBYCOMPANY TEXT NOT NULL, LOCATIONWHERECONTENTSWEREDISPOSED TEXT NOT NULL, HAULER TEXT NOT NULL, HAULERDATE TEXT NOT NULL, RECEIVINGFACILITY TEXT NOT NULL, RECEIVINGFACILITYDATE TEXT NOT NULL, FOREIGN KEY(SEPTICID) REFERENCES SEPTIC(ID), FOREIGN KEY(COMPONENT) REFERENCES SEPTICPUMPINGRECORD(ID) );
CREATE TABLE SEPTICPUMPINGRECORD( ID INTEGER PRIMARY KEY NOT NULL, OPTION TEXT NOT NULL , FOREIGN KEY(ID) REFERENCES SYSTEMPUMPINGRECORDS(COMPONENT));
CREATE TABLE VIOLATIONS( ID INTEGER PRIMARY KEY NOT NULL, RESTAURANTINSPECTIONID INT NOT NULL, CODEREFERENCE TEXT NOT NULL, CRITICALORREDITEM TEXT NOT NULL, DESCRIPTIONOFVIOLATIONCORRECTIONPLAN TEXT NOT NULL, DATEVERIFIED TEXT NOT NULL, FOREIGN KEY(RESTAURANTINSPECTIONID) REFERENCES RESTAURANTINSPECTIONS(ID) );
CREATE TABLE PRIVILEGES( ID INTEGER PRIMARY KEY NOT NULL, PRIVILEGELEVEL INT NOT NULL, USERID INT NOT NULL, FOREIGN KEY(USERID) references USER(ID) );
CREATE TABLE USER( ID INTEGER PRIMARY KEY NOT NULL, USERNAME TEXT NOT NULL, PASSWORDHASH NOT NULL, FOREIGN KEY(ID) references SAVEDSEARCHES(USERID), FOREIGN KEY(ID) references PRIVILEGES(USERID) )
CREATE TABLE SAVEDSEARCHES( ID INTEGER PRIMARY KEY NOT NULL, USERID INT NOT NULL, SAVEDSEARCH TEXT NOT NULL, FOREIGN KEY(USERID) references USER(ID) );
CREATE TABLE WATERQUALITYREPORT( ID INTEGER PRIMARY KEY NOT NULL, WELLID INT NOT NULL, CLIENTNAME TEXT NOT NULL, COLLECTEDBY TEXT NOT NULL, PROJECTNAME TEXT NOT NULL, PROJECTNUMBER TEXT NOT NULL, DATECOLLECTED INT NOT NULL, SAMPLEIDENTIFICATION TEXT NOT NULL, LABNUMBER REAL NOT NULL, TOTALCOLIFORMBACTERIA REAL NOT NULL, TOTALCOLIFORMBACTERIAUNITS TEXT NOT NULL, NITRATENITROGEN REAL NOT NULL, NITRATENITROGENUNITS TEXT NOT NULL, PH REAL NOT NULL, PHUNITS TEXT NOT NULL, IRON REAL NOT NULL, IRONUNITS TEXT NOT NULL, HARDNESSASCACO3 REAL NOT NULL, HARDNESSASCACO3UNITS TEXT NOT NULL, SULFATESULFUR REAL NOT NULL, SULFATESULFUREUNITS TEXT NOT NULL, CHLORIDE REAL NOT NULL, SPECIFICCONDUCTANCE REAL NOT NULL, SPECIFICCONDUCTANCEUNITS TEXT NOT NULL, THISWATERSAMPLEPASSESDRINKINGWATERSTANDARDS INT NOT NULL, SUBMITTEDBY TEXT NOT NULL, ADDITIONALNOTES TEXT, FOREIGN KEY(WELLID) REFERENCES WELL(ID) );